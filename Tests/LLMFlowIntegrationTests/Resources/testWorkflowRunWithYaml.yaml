nodes:
  - id: start_id
    type: START
    inputs:
      message: String
      name: String
      langauge: String

  - id: template_id
    type: TEMPLATE
    template: >
      {% if workflow.inputs.langauge == "zh-Hans" %}简体中文{% elif workflow.inputs.langauge == "zh-Hant" or workflow.inputs.langauge == "zh" %}繁體中文{% elif  workflow.inputs.langauge == "ja"%}日本語{% elif  workflow.inputs.langauge == "vi"%}Tiếng Việt{% elif  workflow.inputs.langauge == "ko"%}한국어{% else %}English{% endif %}

  - id: llm_id
    type: LLM
    modelName: test_openai
    request:
      stream: true
      instructions: >
        be an echo server.\nbefore response, say 'hi [USER NAME]' first.\nwhat I send to you, you send back.\n\nthe exceptions:\n1. send \\"ping\\", back \\"pong\\"\n2. send \\"ding\\", back \\"dang\\"
      inputs:
        - type: text
          role: user
          "#content": "you are talking to {{workflow.inputs.name}} in {{ template_id.result }}"
        - type: text
          role: assistant
          "#content": "OK"
        - type: text
          role: user
          $content:
            - workflow
            - inputs
            - message

  - id: end_id
    type: END

edges:
  - from: start_id
    to: template_id
  - from: template_id
    to: llm_id
  - from: llm_id
    to: end_id
